/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/content2.ts":
/*!*************************!*\
  !*** ./src/content2.ts ***!
  \*************************/
/***/ (function() {


// Generated by CoffeeScript 1.12.5
// @ts-nocheck
(function () {
    if (document.getElementById("areyousure")) {
        return;
    }
    const CONTENT = `
    <button hidden>\n  
      <svg xmlns="http://www.w3.org/2000/svg" version="1.1"\n    viewBox="0 0 240 240">\n\n 
        <filter id="areyousure-dropshadow" height="130%">\n      
          <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>\n       
          <feOffset dx="2" dy="0" result="offsetblur"/>\n       
          <feComponentTransfer>\n       
          <feFuncA type="linear" slope="0.5"/>\n  
          </feComponentTransfer>\n   
          <feMerge>\n        
          <feMergeNode/>\n       
          <feMergeNode in="SourceGraphic"/>\n       
          </feMerge>\n      
        </filter>\n\n   
        <circle id="areyousure-circle" cx="120" cy="120" r="100" style="filter:url(#areyousure-dropshadow)"/>\n 
        <text id="areyousure-text" x="120" y="120" font-size="24px"\n  
        fill="white" dominant-baseline="middle" text-anchor="middle">\n     
              Are you sure?\n   
        </text>\n 
      </svg>\n
  </button>
  <div id="explanationContainer"> 
    <div id="reminder" font-size="12px" style="font-weight:bold; margin-bottom: 2px">
    You wanted us to remind you that</div>
    <hr>
    <text id="explanation" font-size="18px"\n  
          fill="white" dominant-baseline="middle" text-anchor="middle">\n     
                Explanation?\n   
    </text>
  </div>\n `;
    let container = document.createElement("div");
    let shadow = container.attachShadow({
        mode: "open",
    });
    let dialog = document.createElement("dialog");
    shadow.resetStyleInheritance = true;
    dialog.style.background = "none";
    dialog.style.border = "none";
    dialog.style.display = "flex";
    dialog.style.flexDirection = "column";
    shadow.appendChild(dialog);
    // We are doing that to make sure all of our css changes are only for the ones that inside our dialog
    dialog.id = "areyousure";
    dialog.innerHTML = CONTENT;
    dialog.addEventListener("cancel", function (e) {
        return e.preventDefault();
    });
    document.documentElement.appendChild(container);
    dialog.showModal();
    let staticStyle = document.createElement("link");
    staticStyle.rel = "stylesheet";
    staticStyle.type = "text/css";
    staticStyle.href = chrome.runtime.getURL("../content2.css");
    shadow.appendChild(staticStyle);
    let dynamicStyle = document.createElement("style");
    shadow.appendChild(dynamicStyle);
    let setStyles = function (arg) {
        let holdTime = arg.holdTime;
        let backdropOpacity = arg.backdropOpacity;
        dynamicStyle.textContent =
            "#areyousure button:active circle {\n  transition: stroke-dashoffset " +
                holdTime +
                "s linear !important;\n}\n\n#areyousure::backdrop {\n  background-color: rgba(0,0,0," +
                backdropOpacity +
                ");\n}";
        return dynamicStyle.textContent;
    };
    let timer = null;
    let completed = false;
    let button = dialog.querySelector("button");
    let textElements = dialog.querySelectorAll("text");
    let buttonText = textElements[0];
    let explanation = textElements[1];
    chrome.storage.sync.get({
        holdTime: 2,
        backdropOpacity: 0.8,
        defaultExplanation: "Default",
        sites: [],
    }, function (opts) {
        setStyles(opts);
        let site = opts.sites.find((s) => "www." + s.hostSuffix == window.location.hostname);
        // if (site && site.useDefaultExplanation) {
        // // get the current tab domain name
        // explanation.textContent = site.explanation;
        // }
        explanation.textContent = site.useDefaultExplanation
            ? opts.defaultExplanation
            : site.explanation;
        let start = function (ev) {
            if (!(ev.button === 0 || ev.code === "Space")) {
                return;
            }
            if (timer || completed) {
                return;
            }
            timer = setTimeout(function () {
                completed = true;
                return button.classList.add("completed");
            }, opts.holdTime * 1000);
            return timer;
        };
        let stop = function (ev) {
            if (!(ev.button === 0 || ev.code === "Space")) {
                return;
            }
            if (!timer) {
                return;
            }
            clearTimeout(timer);
            timer = null;
            return button.classList.remove("activated");
        };
        button.addEventListener("blur", function () {
            return button.focus();
        });
        button.addEventListener("mousedown", start);
        window.addEventListener("mouseup", stop);
        button.addEventListener("keydown", start);
        window.addEventListener("keyup", stop);
        return button.addEventListener("click", function (e) {
            // if not completed
            if (!completed) {
                return e.preventDefault();
            }
            // if completed
            window.removeEventListener("mouseup", stop);
            window.removeEventListener("keyup", stop);
            dialog.close();
            container.remove();
            // inform the background process that the button was clicked and completed.
            return chrome.runtime.sendMessage("clicked");
        });
    });
    chrome.runtime.onMessage.addListener(function (msg) {
        console.log(msg);
        if (msg.explanation) {
            // explanation.textContent = msg.explanation;
            console.log("Message reached!!" + msg.explanation);
        }
    });
}).call(this);


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/content2.ts"]();
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxNQUFNLEVBQUUsQ0FBQztZQUVuQiwyRUFBMkU7WUFDM0UsT0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUMvQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FDRixDQUFDO0lBRUYsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLFVBQVUsR0FBRztRQUNoRCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLElBQUksR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBQ3BCLDZDQUE2QztZQUM3QyxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixHQUFHLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNyRCxDQUFDO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7O1VFbkxkO1VBQ0E7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcmV5b3VzdXJlLXVwZGF0ZWQvLi9zcmMvY29udGVudDIudHMiLCJ3ZWJwYWNrOi8vYXJleW91c3VyZS11cGRhdGVkL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vYXJleW91c3VyZS11cGRhdGVkL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9hcmV5b3VzdXJlLXVwZGF0ZWQvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS4xMi41XHJcbi8vIEB0cy1ub2NoZWNrXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXJleW91c3VyZVwiKSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgQ09OVEVOVCA9IGBcclxuICAgIDxidXR0b24gaGlkZGVuPlxcbiAgXHJcbiAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIlxcbiAgICB2aWV3Qm94PVwiMCAwIDI0MCAyNDBcIj5cXG5cXG4gXHJcbiAgICAgICAgPGZpbHRlciBpZD1cImFyZXlvdXN1cmUtZHJvcHNoYWRvd1wiIGhlaWdodD1cIjEzMCVcIj5cXG4gICAgICBcclxuICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBpbj1cIlNvdXJjZUFscGhhXCIgc3RkRGV2aWF0aW9uPVwiMlwiLz5cXG4gICAgICAgXHJcbiAgICAgICAgICA8ZmVPZmZzZXQgZHg9XCIyXCIgZHk9XCIwXCIgcmVzdWx0PVwib2Zmc2V0Ymx1clwiLz5cXG4gICAgICAgXHJcbiAgICAgICAgICA8ZmVDb21wb25lbnRUcmFuc2Zlcj5cXG4gICAgICAgXHJcbiAgICAgICAgICA8ZmVGdW5jQSB0eXBlPVwibGluZWFyXCIgc2xvcGU9XCIwLjVcIi8+XFxuICBcclxuICAgICAgICAgIDwvZmVDb21wb25lbnRUcmFuc2Zlcj5cXG4gICBcclxuICAgICAgICAgIDxmZU1lcmdlPlxcbiAgICAgICAgXHJcbiAgICAgICAgICA8ZmVNZXJnZU5vZGUvPlxcbiAgICAgICBcclxuICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj1cIlNvdXJjZUdyYXBoaWNcIi8+XFxuICAgICAgIFxyXG4gICAgICAgICAgPC9mZU1lcmdlPlxcbiAgICAgIFxyXG4gICAgICAgIDwvZmlsdGVyPlxcblxcbiAgIFxyXG4gICAgICAgIDxjaXJjbGUgaWQ9XCJhcmV5b3VzdXJlLWNpcmNsZVwiIGN4PVwiMTIwXCIgY3k9XCIxMjBcIiByPVwiMTAwXCIgc3R5bGU9XCJmaWx0ZXI6dXJsKCNhcmV5b3VzdXJlLWRyb3BzaGFkb3cpXCIvPlxcbiBcclxuICAgICAgICA8dGV4dCBpZD1cImFyZXlvdXN1cmUtdGV4dFwiIHg9XCIxMjBcIiB5PVwiMTIwXCIgZm9udC1zaXplPVwiMjRweFwiXFxuICBcclxuICAgICAgICBmaWxsPVwid2hpdGVcIiBkb21pbmFudC1iYXNlbGluZT1cIm1pZGRsZVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCI+XFxuICAgICBcclxuICAgICAgICAgICAgICBBcmUgeW91IHN1cmU/XFxuICAgXHJcbiAgICAgICAgPC90ZXh0PlxcbiBcclxuICAgICAgPC9zdmc+XFxuXHJcbiAgPC9idXR0b24+XHJcbiAgPGRpdiBpZD1cImV4cGxhbmF0aW9uQ29udGFpbmVyXCI+IFxyXG4gICAgPGRpdiBpZD1cInJlbWluZGVyXCIgZm9udC1zaXplPVwiMTJweFwiIHN0eWxlPVwiZm9udC13ZWlnaHQ6Ym9sZDsgbWFyZ2luLWJvdHRvbTogMnB4XCI+XHJcbiAgICBZb3Ugd2FudGVkIHVzIHRvIHJlbWluZCB5b3UgdGhhdDwvZGl2PlxyXG4gICAgPGhyPlxyXG4gICAgPHRleHQgaWQ9XCJleHBsYW5hdGlvblwiIGZvbnQtc2l6ZT1cIjE4cHhcIlxcbiAgXHJcbiAgICAgICAgICBmaWxsPVwid2hpdGVcIiBkb21pbmFudC1iYXNlbGluZT1cIm1pZGRsZVwiIHRleHQtYW5jaG9yPVwibWlkZGxlXCI+XFxuICAgICBcclxuICAgICAgICAgICAgICAgIEV4cGxhbmF0aW9uP1xcbiAgIFxyXG4gICAgPC90ZXh0PlxyXG4gIDwvZGl2PlxcbiBgO1xyXG4gIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gIGxldCBzaGFkb3cgPSBjb250YWluZXIuYXR0YWNoU2hhZG93KHtcclxuICAgIG1vZGU6IFwib3BlblwiLFxyXG4gIH0pO1xyXG5cclxuICBsZXQgZGlhbG9nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpYWxvZ1wiKTtcclxuICBzaGFkb3cucmVzZXRTdHlsZUluaGVyaXRhbmNlID0gdHJ1ZTtcclxuICBkaWFsb2cuc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xyXG4gIGRpYWxvZy5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcclxuICBkaWFsb2cuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xyXG4gIGRpYWxvZy5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcclxuICBzaGFkb3cuYXBwZW5kQ2hpbGQoZGlhbG9nKTtcclxuXHJcbiAgLy8gV2UgYXJlIGRvaW5nIHRoYXQgdG8gbWFrZSBzdXJlIGFsbCBvZiBvdXIgY3NzIGNoYW5nZXMgYXJlIG9ubHkgZm9yIHRoZSBvbmVzIHRoYXQgaW5zaWRlIG91ciBkaWFsb2dcclxuICBkaWFsb2cuaWQgPSBcImFyZXlvdXN1cmVcIjtcclxuICBkaWFsb2cuaW5uZXJIVE1MID0gQ09OVEVOVDtcclxuICBkaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihcImNhbmNlbFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgcmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxuXHJcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcblxyXG4gIGRpYWxvZy5zaG93TW9kYWwoKTtcclxuXHJcbiAgbGV0IHN0YXRpY1N0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcbiAgc3RhdGljU3R5bGUucmVsID0gXCJzdHlsZXNoZWV0XCI7XHJcbiAgc3RhdGljU3R5bGUudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuICBzdGF0aWNTdHlsZS5ocmVmID0gY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKFwiLi4vY29udGVudDIuY3NzXCIpO1xyXG4gIHNoYWRvdy5hcHBlbmRDaGlsZChzdGF0aWNTdHlsZSk7XHJcblxyXG4gIGxldCBkeW5hbWljU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcbiAgc2hhZG93LmFwcGVuZENoaWxkKGR5bmFtaWNTdHlsZSk7XHJcblxyXG4gIGxldCBzZXRTdHlsZXMgPSBmdW5jdGlvbiAoYXJnKSB7XHJcbiAgICBsZXQgaG9sZFRpbWUgPSBhcmcuaG9sZFRpbWU7XHJcbiAgICBsZXQgYmFja2Ryb3BPcGFjaXR5ID0gYXJnLmJhY2tkcm9wT3BhY2l0eTtcclxuICAgIGR5bmFtaWNTdHlsZS50ZXh0Q29udGVudCA9XHJcbiAgICAgIFwiI2FyZXlvdXN1cmUgYnV0dG9uOmFjdGl2ZSBjaXJjbGUge1xcbiAgdHJhbnNpdGlvbjogc3Ryb2tlLWRhc2hvZmZzZXQgXCIgK1xyXG4gICAgICBob2xkVGltZSArXHJcbiAgICAgIFwicyBsaW5lYXIgIWltcG9ydGFudDtcXG59XFxuXFxuI2FyZXlvdXN1cmU6OmJhY2tkcm9wIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsXCIgK1xyXG4gICAgICBiYWNrZHJvcE9wYWNpdHkgK1xyXG4gICAgICBcIik7XFxufVwiO1xyXG5cclxuICAgIHJldHVybiBkeW5hbWljU3R5bGUudGV4dENvbnRlbnQ7XHJcbiAgfTtcclxuXHJcbiAgbGV0IHRpbWVyID0gbnVsbDtcclxuICBsZXQgY29tcGxldGVkID0gZmFsc2U7XHJcbiAgbGV0IGJ1dHRvbiA9IGRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xyXG4gIGxldCB0ZXh0RWxlbWVudHMgPSBkaWFsb2cucXVlcnlTZWxlY3RvckFsbChcInRleHRcIik7XHJcbiAgbGV0IGJ1dHRvblRleHQgPSB0ZXh0RWxlbWVudHNbMF07XHJcbiAgbGV0IGV4cGxhbmF0aW9uID0gdGV4dEVsZW1lbnRzWzFdO1xyXG5cclxuICBjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChcclxuICAgIHtcclxuICAgICAgaG9sZFRpbWU6IDIsXHJcbiAgICAgIGJhY2tkcm9wT3BhY2l0eTogMC44LFxyXG4gICAgICBkZWZhdWx0RXhwbGFuYXRpb246IFwiRGVmYXVsdFwiLFxyXG4gICAgICBzaXRlczogW10sXHJcbiAgICB9LFxyXG4gICAgZnVuY3Rpb24gKG9wdHMpIHtcclxuICAgICAgc2V0U3R5bGVzKG9wdHMpO1xyXG5cclxuICAgICAgbGV0IHNpdGUgPSBvcHRzLnNpdGVzLmZpbmQoXHJcbiAgICAgICAgKHMpID0+IFwid3d3LlwiICsgcy5ob3N0U3VmZml4ID09IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gaWYgKHNpdGUgJiYgc2l0ZS51c2VEZWZhdWx0RXhwbGFuYXRpb24pIHtcclxuICAgICAgLy8gLy8gZ2V0IHRoZSBjdXJyZW50IHRhYiBkb21haW4gbmFtZVxyXG4gICAgICAvLyBleHBsYW5hdGlvbi50ZXh0Q29udGVudCA9IHNpdGUuZXhwbGFuYXRpb247XHJcbiAgICAgIC8vIH1cclxuXHJcbiAgICAgIGV4cGxhbmF0aW9uLnRleHRDb250ZW50ID0gc2l0ZS51c2VEZWZhdWx0RXhwbGFuYXRpb25cclxuICAgICAgICA/IG9wdHMuZGVmYXVsdEV4cGxhbmF0aW9uXHJcbiAgICAgICAgOiBzaXRlLmV4cGxhbmF0aW9uO1xyXG5cclxuICAgICAgbGV0IHN0YXJ0ID0gZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgaWYgKCEoZXYuYnV0dG9uID09PSAwIHx8IGV2LmNvZGUgPT09IFwiU3BhY2VcIikpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aW1lciB8fCBjb21wbGV0ZWQpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBjb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgcmV0dXJuIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVkXCIpO1xyXG4gICAgICAgIH0sIG9wdHMuaG9sZFRpbWUgKiAxMDAwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRpbWVyO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgbGV0IHN0b3AgPSBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICBpZiAoIShldi5idXR0b24gPT09IDAgfHwgZXYuY29kZSA9PT0gXCJTcGFjZVwiKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aW1lcikge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuXHJcbiAgICAgICAgdGltZXIgPSBudWxsO1xyXG4gICAgICAgIHJldHVybiBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2YXRlZFwiKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbi5mb2N1cygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHN0YXJ0KTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHN0b3ApO1xyXG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgc3RhcnQpO1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHN0b3ApO1xyXG5cclxuICAgICAgcmV0dXJuIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAvLyBpZiBub3QgY29tcGxldGVkXHJcbiAgICAgICAgaWYgKCFjb21wbGV0ZWQpIHtcclxuICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBpZiBjb21wbGV0ZWRcclxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcCk7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBzdG9wKTtcclxuICAgICAgICBkaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICBjb250YWluZXIucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgIC8vIGluZm9ybSB0aGUgYmFja2dyb3VuZCBwcm9jZXNzIHRoYXQgdGhlIGJ1dHRvbiB3YXMgY2xpY2tlZCBhbmQgY29tcGxldGVkLlxyXG4gICAgICAgIHJldHVybiBjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZShcImNsaWNrZWRcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICk7XHJcblxyXG4gIGNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbiAobXNnKSB7XHJcbiAgICBjb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgaWYgKG1zZy5leHBsYW5hdGlvbikge1xyXG4gICAgICAvLyBleHBsYW5hdGlvbi50ZXh0Q29udGVudCA9IG1zZy5leHBsYW5hdGlvbjtcclxuICAgICAgY29uc29sZS5sb2coXCJNZXNzYWdlIHJlYWNoZWQhIVwiICsgbXNnLmV4cGxhbmF0aW9uKTtcclxuICAgIH1cclxuICB9KTtcclxufSkuY2FsbCh0aGlzKTtcclxuIiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSB7fTtcbl9fd2VicGFja19tb2R1bGVzX19bXCIuL3NyYy9jb250ZW50Mi50c1wiXSgpO1xuIiwiIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9